"use strict";(self.webpackChunkmultipurpose_calculator=self.webpackChunkmultipurpose_calculator||[]).push([["pca"],{"./js/pca.js":function(t,a,e){e.r(a);var i=e("./js/util.js");$("#pca-drug, #pca-orderset").on("change",(function(){const t=$("#pca-drug")[0].value,a=$("#pca-orderset")[0].value;"morphine"===t?"standard"===a?m=r:"high"===a&&(m=s):"hydromorphone"===t?"standard"===a?m=c:"high"===a&&(m=o):"fentanyl"===t&&("standard"===a?m=u:"high"===a&&(m=l));const e=m.getLimitHtml();$("#pca-pumplimit-dose").html(e[0]),$("#pca-pumplimit-rate").html(e[1]),$("#pca-pumplimit-max").html(e[2]),$("#pca-syringe").html(`${m.name} ${m.syringe}`),$(".pca-units").html(m.unit),$(".pca-unitsPerOneHour").html(m.unitRate),$(".pca-unitsPerHours").html(m.unitMax),p()})),$("#pca-continuous").on("change",(function(){h=$("#pca-continuous")[0].value,"overnight"!==h?$(".pca-ci-night").hide():$(".pca-ci-night").show();"none"===h?$(".pca-ci-only").hide():$(".pca-ci-only").show();p()})),$(".input-pca").on("keyup",p);class n{constructor(t,a,e,i,n){this.name=t,this.range=a,this.unit=e,this.conc=i,this.limits=n}get syringe(){return`${30*this.conc} ${this.unit}/30 mL`}get unitRate(){return`${this.unit}/hr`}get unitMax(){return"standard"===this.range?`${this.unit}/4 hr`:"high"===this.range?`${this.unit}/hr`:void 0}get maxDoseTimespan(){return"standard"===this.range?4:"high"===this.range?1:void 0}get mgPerSyr(){return 30*this.conc}getLimit(t){switch(t){case"doseUSL":return this.limits[0];case"doseUHL":return this.limits[1];case"rateUSL":return this.limits[2];case"rateUHL":return this.limits[3];case"maxUSL":return this.limits[4];case"maxUHL":return this.limits[5];default:return 0}}getLimitHtml(){return[`${this.getLimit("doseUSL")}-<b>${this.getLimit("doseUHL")} ${this.unit}</b>`,`${this.getLimit("rateUSL")}-<b>${this.getLimit("rateUHL")} ${this.unitRate}</b>`,`${this.getLimit("maxUSL")}-<b>${this.getLimit("maxUHL")} ${this.unitMax}</b>`]}}const r=new n("morphine","standard","mg",1,[4,5,2,3,30,60]),s=new n("morphine","high","mg",5,[5,6,5,20,100,100]),c=new n("hydromorphone","standard","mg",1,[1,2,.5,1,8,20]),o=new n("hydromorphone","high","mg",2,[2,4,3,10,20,40]),u=new n("fentanyl","standard","mcg",20,[20,50,40,50,300,500]),l=new n("fentanyl","high","mcg",50,[50,100,50,400,300,750]);let m=r,h="none";function p(){$(".pca-bg-warning").removeClass("pca-bg-warning"),$(".pca-bg-danger").removeClass("pca-bg-danger"),$(".pca-bg-error").removeClass("pca-bg-error");const t=(0,i.wS)($("#pca-bolusDose").val(),.01,300),a=(0,i.wS)($("#pca-lockout").val(),1,240),e=(0,i.wS)($("#pca-orderedMax").val(),.1,2e3),n="none"===h?0:(0,i.wS)($("#pca-ciRate").val(),.01,1e3,!0),r=m.maxDoseTimespan,s=m.mgPerSyr,c=(m.unit,` ${m.unitMax}`),o=0===a?0:60/a*r*t;(0,i.AI)("#pca-maxFromBolus",o,.1,c),(0,i.AI)("#pca-maxFromBolus2",o,.1,c);const u="continuous"===h?n*r:0,l=("none"!==h?n*r:0)||0;(0,i.AI)("#pca-amtFromCI",l,.1,c),"night"===h&&l>0?$("#pca-amtFromCI-day").html("---"):$("#pca-amtFromCI-day").html("");const p=u+o;(0,i.AI)("#pca-totalAmtPossible-day",p,.1,c);const g=l+o;(0,i.AI)("#pca-totalAmtPossible-night",g,.1,c);const d=s/p*r;(0,i.AI)("#pca-maxDispenseFreq-day",d,.1," hr");const f=s/g*r;(0,i.AI)("#pca-maxDispenseFreq-night",f,.1," hr");let L=e-u,b=e-l;L<=0&&e>0?($("#pca-availableForBolus-day").html("max &le; CI").addClass("pca-bg-error"),L=0):(0,i.AI)("#pca-availableForBolus-day",L,.1,c),b<=0&&e>0?($("#pca-availableForBolus-night").html("max &le; CI").addClass("pca-bg-error"),b=0):(0,i.AI)("#pca-availableForBolus-night",b,.1,c);const v=e>0?60/(L/r/t):0,y=e>0?60/(b/r/t):0;L<t&&e>0?$("#pca-averageFreq-day").html("---").addClass("pca-bg-error"):((0,i.AI)("#pca-averageFreq-day",v,.1," min","q "),a>0&&v>a&&$("#pca-averageFreq-day").addClass("pca-bg-warning")),b<t&&e>0?$("#pca-averageFreq-night").html("---").addClass("pca-bg-error"):((0,i.AI)("#pca-averageFreq-night",y,.1," min","q "),a>0&&y>a&&$("#pca-averageFreq-night").addClass("pca-bg-warning"));const w=s/e*r;(0,i.AI)("#pca-maxDispenseFreq-final",w,.1," hr"),function(t,a,e,i){for(let n=0;n<=t.length;n++)t[n]>e[n]?$(i[n]).addClass("pca-bg-danger"):t[n]>a[n]&&$(i[n]).addClass("pca-bg-warning")}([t,n,e],[m.getLimit("doseUSL"),m.getLimit("rateUSL"),m.getLimit("maxUSL")],[m.getLimit("doseUHL"),m.getLimit("rateUHL"),m.getLimit("maxUHL")],["#pca-pumplimit-dose","#pca-pumplimit-rate","#pca-pumplimit-max"])}},"./js/util.js":function(t,a,e){function i(t){const a=("0"+t.getMinutes()).slice(-2),e=("0"+t.getHours()).slice(-2);return`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()} ${e}:${a}`}function n(t,a){if(a=u(a),""===t||""===a)return 0;let e=+t.slice(0,4),i=+t.slice(5,7),n=+t.slice(8,10),r=+a.slice(0,2),s=+a.slice(2,4);return new Date(e,i-1,n,r,s,0,0)}function r(t,a){return(a-t)/1e3/60/60}function s(t,a=0){if(a<=0||isNaN(t))return t;let e=Math.round(t/a)*a;return e=Math.floor(1e3*e),e/=1e3,e}function c(t,a=0,e=-1,i="",n="",r=!1){let c="",o=!1;return a!==1/0&&a!==-1/0&&(a<0&&r&&(a=0-a,o=!0),a>0&&(c=s(a,e)),o&&(c=0-c)),""!==c&&(c=n+c+i),""===t?c:($(t).html(c),t)}function o(t,a=-1/0,e=1/0,i=!1){if(!i||""!==t)return"string"==typeof(t=parseFloat(t))||isNaN(t)||t<a||t>e?0:t}function u(t){return/(^[0-1]{0,1}[0-9]{1}$)|(^2[0-3]{1}$)/.test(t+="")?("0"+t+"00").slice(-4):/^(([0-1]{0,1}[0-9]{1})|2{1}[0-4]{1})[0-5]{1}[0-9]{1}$/.test(t)?("0"+t.slice(0,-2)).slice(-2)+t.slice(-2):""}e.d(a,{Po:function(){return i},Fc:function(){return n},Cs:function(){return r},RW:function(){return s},AI:function(){return c},wS:function(){return o},aD:function(){return u}})}},function(t){var a;a="./js/pca.js",t(t.s=a)}]);