"use strict";(self.webpackChunkmultipurpose_calculator=self.webpackChunkmultipurpose_calculator||[]).push([["pca"],{"./js/pca.js":function(t,e,a){a.r(e);var i=a("./js/util.js");$("#pca-drug, #pca-orderset").on("change",(function(){const t=$("#pca-drug")[0].value,e=$("#pca-orderset")[0].value;"morphine"===t?"standard"===e?m=r:"high"===e&&(m=s):"hydromorphone"===t?"standard"===e?m=c:"high"===e&&(m=o):"fentanyl"===t&&("standard"===e?m=u:"high"===e&&(m=l));const a=m.getLimitHtml();$("#pca-pumplimit-dose").html(a[0]),$("#pca-pumplimit-rate").html(a[1]),$("#pca-pumplimit-max").html(a[2]),$("#pca-syringe").html(`${m.name} ${m.syringe}`),$(".pca-units").html(m.unit),$(".pca-unitsPerOneHour").html(m.unitRate),$(".pca-unitsPerHours").html(m.unitMax),p()})),$("#pca-continuous").on("change",(function(){h=$("#pca-continuous")[0].value,"overnight"!==h?$(".pca-ci-night").hide():$(".pca-ci-night").show();"none"===h?$(".pca-ci-only").hide():$(".pca-ci-only").show();p()})),$(".input-pca").on("keyup",p);class n{constructor(t,e,a,i,n){this.name=t,this.range=e,this.unit=a,this.conc=i,this.limits=n}get syringe(){return`${30*this.conc} ${this.unit}/30 mL`}get unitRate(){return`${this.unit}/hr`}get unitMax(){return"standard"===this.range?`${this.unit}/4 hr`:"high"===this.range?`${this.unit}/hr`:void 0}get maxDoseTimespan(){return"standard"===this.range?4:"high"===this.range?1:void 0}get mgPerSyr(){return 30*this.conc}getLimit(t){switch(t){case"doseUSL":return this.limits[0];case"doseUHL":return this.limits[1];case"rateUSL":return this.limits[2];case"rateUHL":return this.limits[3];case"maxUSL":return this.limits[4];case"maxUHL":return this.limits[5];default:return 0}}getLimitHtml(){return[`${this.getLimit("doseUSL")}-<b>${this.getLimit("doseUHL")} ${this.unit}</b>`,`${this.getLimit("rateUSL")}-<b>${this.getLimit("rateUHL")} ${this.unitRate}</b>`,`${this.getLimit("maxUSL")}-<b>${this.getLimit("maxUHL")} ${this.unitMax}</b>`]}}const r=new n("morphine","standard","mg",1,[4,5,2,3,30,60]),s=new n("morphine","high","mg",5,[5,6,5,20,100,100]),c=new n("hydromorphone","standard","mg",1,[1,2,.5,1,8,20]),o=new n("hydromorphone","high","mg",2,[2,4,3,10,20,40]),u=new n("fentanyl","standard","mcg",20,[20,50,40,50,300,500]),l=new n("fentanyl","high","mcg",50,[50,100,50,400,300,750]);let m=r,h="none";function p(){$(".pca-bg-warning").removeClass("pca-bg-warning"),$(".pca-bg-danger").removeClass("pca-bg-danger"),$(".pca-bg-error").removeClass("pca-bg-error");const t=(0,i.wS)($("#pca-bolusDose").val(),.01,300),e=(0,i.wS)($("#pca-lockout").val(),1,240),a=(0,i.wS)($("#pca-orderedMax").val(),.1,2e3),n="none"===h?0:(0,i.wS)($("#pca-ciRate").val(),.01,1e3,!0),r=m.maxDoseTimespan,s=m.mgPerSyr,c=(m.unit,` ${m.unitMax}`),o=0===e?0:60/e*r*t;(0,i.AI)("#pca-maxFromBolus",o,.1,c),(0,i.AI)("#pca-maxFromBolus2",o,.1,c);const u="continuous"===h?n*r:0,l=("none"!==h?n*r:0)||0;(0,i.AI)("#pca-amtFromCI",l,.1,c),"night"===h&&l>0?$("#pca-amtFromCI-day").html("---"):$("#pca-amtFromCI-day").html("");const p=u+o;(0,i.AI)("#pca-totalAmtPossible-day",p,.1,c);const g=l+o;(0,i.AI)("#pca-totalAmtPossible-night",g,.1,c);const d=s/p*r;(0,i.AI)("#pca-maxDispenseFreq-day",d,.1," hr");const f=s/g*r;(0,i.AI)("#pca-maxDispenseFreq-night",f,.1," hr");let L=a-u,b=a-l;L<=0&&a>0?($("#pca-availableForBolus-day").html("max &le; CI").addClass("pca-bg-error"),L=0):(0,i.AI)("#pca-availableForBolus-day",L,.1,c),b<=0&&a>0?($("#pca-availableForBolus-night").html("max &le; CI").addClass("pca-bg-error"),b=0):(0,i.AI)("#pca-availableForBolus-night",b,.1,c);const v=a>0?60/(L/r/t):0,y=a>0?60/(b/r/t):0;L<t&&a>0?$("#pca-averageFreq-day").html("---").addClass("pca-bg-error"):((0,i.AI)("#pca-averageFreq-day",v,.1," min","q "),e>0&&v>e&&$("#pca-averageFreq-day").addClass("pca-bg-warning")),b<t&&a>0?$("#pca-averageFreq-night").html("---").addClass("pca-bg-error"):((0,i.AI)("#pca-averageFreq-night",y,.1," min","q "),e>0&&y>e&&$("#pca-averageFreq-night").addClass("pca-bg-warning"));const w=s/a*r;(0,i.AI)("#pca-maxDispenseFreq-final",w,.1," hr"),function(t,e,a,i){for(let n=0;n<=t.length;n++)t[n]>a[n]?$(i[n]).addClass("pca-bg-danger"):t[n]>e[n]&&$(i[n]).addClass("pca-bg-warning")}([t,n,a],[m.getLimit("doseUSL"),m.getLimit("rateUSL"),m.getLimit("maxUSL")],[m.getLimit("doseUHL"),m.getLimit("rateUHL"),m.getLimit("maxUHL")],["#pca-pumplimit-dose","#pca-pumplimit-rate","#pca-pumplimit-max"])}},"./js/util.js":function(t,e,a){function i(t){try{const e=("0"+t.getMinutes()).slice(-2),a=("0"+t.getHours()).slice(-2),i=t.getMonth()+1,n=t.getDate();return`${i}/${n}/${t.getFullYear()} ${a}:${e}`}catch{return""}}function n(t,e){if(e=l(e),""===t||""===e)return 0;let a=+t.slice(0,4),i=+t.slice(5,7),n=+t.slice(8,10),r=+e.slice(0,2),s=+e.slice(2,4);return new Date(a,i-1,n,r,s,0,0)}function r(t,e){return(e-t)/1e3/60/60}function s(t,e=0){if(e<=0||isNaN(t))return t;let a=Math.round(t/e)*e;return a=Math.floor(1e3*a),a/=1e3,a}function c(t,e=0,a=-1,i="",n="",r=!1){let c="",o=!1;return e!==1/0&&e!==-1/0&&(e<0&&r&&(e=0-e,o=!0),e>0&&(c=s(e,a)),o&&(c=0-c)),""!==c&&(c=n+c+i),""===t?c:($(t).html(c),t)}function o(t){if(/^\d+ *[Dd]$/.test(t)){return+t.replace(/ *d */gi,"")/365.25}if(/^\d+ *[Mm]$/.test(t)){return+t.replace(/ *m */gi,"")/12}if(/^\d+ *[Mm]\d+ *[Dd]$/.test(t)){let e=t.split("m");return e[1]=e[1].replace("d",""),e[0]/12+e[1]/365.25}if(!isNaN(+t))return+t}function u(t,e=-1/0,a=1/0,i=!1){if(!i||""!==t)return"string"==typeof(t=parseFloat(t))||isNaN(t)||t<e||t>a?0:t}function l(t){return/(^[0-1]{0,1}[0-9]{1}$)|(^2[0-3]{1}$)/.test(t+="")?("0"+t+"00").slice(-4):/^(([0-1]{0,1}[0-9]{1})|2{1}[0-4]{1})[0-5]{1}[0-9]{1}$/.test(t)?("0"+t.slice(0,-2)).slice(-2)+t.slice(-2):""}a.d(e,{Po:function(){return i},Fc:function(){return n},Cs:function(){return r},RW:function(){return s},AI:function(){return c},hN:function(){return o},wS:function(){return u},aD:function(){return l}})}},function(t){var e;e="./js/pca.js",t(t.s=e)}]);