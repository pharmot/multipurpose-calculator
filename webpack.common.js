const pjs = require('./package.json');
const thisYear = new Date().getFullYear();
const HtmlWebpackPlugin = require ('html-webpack-plugin');
const CopyPlugin = require('copy-webpack-plugin');
const isBeta = /beta/.test(pjs.version);
const logoHtml = `<svg id="svg--logo" width="60.19749mm" height="11.90808mm" version="1.1" viewBox="0 0 77.521 15.335" xmlns="http://www.w3.org/2000/svg">
  <g transform="translate(-22.825 -100.15)">
    <g>
      <path fill="#00aeec" d="m31.017 101.15c-1.2423 0.89792-2.6525 2.4447-3.1042 3.7992-7.93e-4 2e-3 -0.0019 5e-3 -0.0026 7e-3a3.2518 2.7665 0 0 0-0.13798 0.65216c-0.0042 0.0537-0.0067 0.10719-0.0067 0.15967a3.2518 2.7665 0 0 0 3.2515 2.7662 3.2518 2.7665 0 0 0 3.252-2.7662 3.2518 2.7665 0 0 0-0.0011-0.0708c-1.17e-4 -3e-3 -2.65e-4 -7e-3 -5.3e-4 -0.01a3.2518 2.7665 0 0 0-0.16278-0.78755 3.2518 2.7665 0 0 0 0-5.3e-4c-0.46905-1.3426-1.8604-2.8626-3.0877-3.7496z"/>
      <path fill="#a6ca4d" d="m38.21 113.6c-0.15645-1.5249-0.7909-3.5195-1.7381-4.588-0.0017-2e-3 -0.0032-4e-3 -0.0049-6e-3a2.7665 3.2518 30 0 0-0.4958-0.44557c-0.04444-0.0305-0.08948-0.0594-0.13493-0.0857a2.7665 3.2518 30 0 0-4.0214 1.4328 2.7665 3.2518 30 0 0 0.76964 4.1994 2.7665 3.2518 30 0 0 0.06184 0.0345c0.0029 2e-3 0.0058 3e-3 0.0088 4e-3a2.7665 3.2518 30 0 0 0.76343 0.2528 2.7665 3.2518 30 0 0 4.58e-4 2.7e-4c1.3972 0.26508 3.4093-0.17986 4.7911-0.79918z"/>
      <path fill="#6bbe4b" d="m23.825 113.6c1.3988 0.62695 3.4434 1.0748 4.8424 0.7887 0.0025-5.1e-4 0.0051-8.1e-4 0.0076-1e-3a3.2518 2.7665 60 0 0 0.63377-0.20658c0.04865-0.0232 0.0962-0.0478 0.14165-0.074a3.2518 2.7665 60 0 0 0.76989-4.199 3.2518 2.7665 60 0 0-4.0216-1.4332 3.2518 2.7665 60 0 0-0.06078 0.0363c-0.0028 2e-3 -0.0056 4e-3 -0.0082 5e-3a3.2518 2.7665 60 0 0-0.60065 0.53475 3.2518 2.7665 60 0 0-4.58e-4 2.6e-4c-0.92819 1.0775-1.5489 3.0425-1.7035 4.5488z"/>
    </g>
    <g fill="#70797f" stroke-width=".26458">
      <g aria-label="Virginia Mason">
        <path d="m43.138 106.61h-0.78167q-0.2542-0.74355-0.77532-2.2179-0.52112-1.4807-0.78167-2.2306h0.84522l1.1058 3.4127 1.1058-3.4127h0.84522z"/>
        <path d="m46.087 106.61h-0.78167v-3.2157h0.78167zm-0.75625-3.8194q-0.13981-0.13981-0.13981-0.34953t0.13981-0.34953q0.14617-0.14616 0.36859-0.14616 0.22243 0 0.3686 0.14616 0.15252 0.13981 0.15252 0.34953t-0.15252 0.34953q-0.14617 0.13981-0.3686 0.13981-0.22243 0-0.36859-0.13981z"/>
        <path d="m47.758 103.39v0.71177q0.06991-0.3813 0.32411-0.57831 0.26056-0.20336 0.55289-0.20336 0.10168 0 0.26691 0.0445v0.76896q-0.17159-0.0635-0.36859-0.0635-0.1271 0-0.24785 0.0445-0.11439 0.0381-0.24149 0.14617-0.12075 0.10168-0.19701 0.3241-0.07626 0.22243-0.07626 0.53383v1.4871h-0.78167v-3.2157z"/>
        <path d="m49.957 105q0 0.44485 0.2542 0.73719 0.26056 0.29233 0.6927 0.29233 0.41308 0 0.68635-0.26691 0.27327-0.26692 0.27327-0.73084 0-0.47027-0.27327-0.75625-0.26691-0.29233-0.70541-0.29233-0.42579 0-0.67999 0.29233-0.24785 0.29233-0.24785 0.72448zm-0.4957 2.6818q0.10804-0.20336 0.3114-0.61009 0.19701 0.17159 0.47663 0.27963 0.28598 0.10803 0.57196 0.10803 0.45121 0 0.73719-0.22878t0.28598-0.71812v-0.37495q-0.16523 0.2542-0.46392 0.40037-0.29233 0.14616-0.63551 0.14616-0.69906 0-1.1376-0.48298-0.4385-0.48934-0.4385-1.2075 0-0.70541 0.43214-1.182 0.43214-0.48298 1.1503-0.48298 0.71177 0 1.0931 0.54653v-0.47663h0.78167v2.8661q0 0.95961-0.45757 1.4172-0.45121 0.45756-1.2519 0.45756-0.88336 0-1.4553-0.45756z"/>
        <path d="m54.304 106.61h-0.78167v-3.2157h0.78167zm-0.75625-3.8194q-0.13981-0.13981-0.13981-0.34953t0.13981-0.34953q0.14617-0.14616 0.36859-0.14616 0.22243 0 0.36859 0.14616 0.15252 0.13981 0.15252 0.34953t-0.15252 0.34953q-0.14617 0.13981-0.36859 0.13981-0.22243 0-0.36859-0.13981z"/>
        <path d="m55.206 106.61v-3.2157h0.78167v0.54018q0.29233-0.61008 1.0422-0.61008 0.59102 0 0.88971 0.39401 0.29869 0.39401 0.29869 1.1121v1.7794h-0.78167v-1.7731q0-0.41308-0.16523-0.62915-0.16523-0.22243-0.45756-0.22243-0.36224 0-0.59738 0.26692-0.22878 0.26055-0.22878 0.74989v1.6078z"/>
        <path d="m59.858 106.61h-0.78167v-3.2157h0.78167zm-0.75625-3.8194q-0.13981-0.13981-0.13981-0.34953t0.13981-0.34953q0.14617-0.14616 0.36859-0.14616 0.22243 0 0.36859 0.14616 0.15252 0.13981 0.15252 0.34953t-0.15252 0.34953q-0.14617 0.13981-0.36859 0.13981-0.22243 0-0.36859-0.13981z"/>
        <path d="m63.226 103.39h0.78167v3.2157h-0.78167v-0.48299q-0.35588 0.55289-1.0994 0.55289-0.69906 0-1.1376-0.48298-0.4385-0.48934-0.4385-1.2075 0-0.70541 0.43214-1.182 0.43214-0.48298 1.1503-0.48298 0.71177 0 1.0931 0.54653zm-1.8875 1.6015q0 0.44485 0.2542 0.73719 0.26056 0.29233 0.6927 0.29233 0.41308 0 0.68635-0.26691 0.27327-0.26692 0.27327-0.73084 0-0.47027-0.27327-0.75625-0.26691-0.29233-0.70541-0.29233-0.42579 0-0.67999 0.29233-0.24785 0.29233-0.24785 0.72448z"/>
        <path d="m69.346 106.56h-0.55289l-1.271-3.0568-0.26691 3.1076h-0.81345l0.41308-4.4486h0.85158l1.3663 3.2729 1.36-3.2729h0.85158l0.41943 4.4486h-0.81345l-0.27327-3.1076z"/>
        <path d="m74.945 103.39h0.78167v3.2157h-0.78167v-0.48299q-0.35588 0.55289-1.0994 0.55289-0.69906 0-1.1376-0.48298-0.4385-0.48934-0.4385-1.2075 0-0.70541 0.43214-1.182 0.43214-0.48298 1.1503-0.48298 0.71177 0 1.0931 0.54653zm-1.8875 1.6015q0 0.44485 0.2542 0.73719 0.26056 0.29233 0.6927 0.29233 0.41308 0 0.68635-0.26691 0.27327-0.26692 0.27327-0.73084 0-0.47027-0.27327-0.75625-0.26691-0.29233-0.70541-0.29233-0.42579 0-0.67999 0.29233-0.24785 0.29233-0.24785 0.72448z"/>
        <path d="m76.337 105.85 0.61644-0.26056q0.0572 0.22878 0.24785 0.34953 0.19701 0.11439 0.4385 0.11439 0.19701 0 0.33682-0.0763 0.14617-0.0826 0.14617-0.26056 0-0.197-0.34953-0.34317l-0.47028-0.17794q-0.80709-0.29869-0.80709-0.89607 0-0.4385 0.33046-0.70541 0.33682-0.26691 0.84522-0.26691 0.87064 0 1.1248 0.71812l-0.62915 0.22878q-0.10168-0.33046-0.48934-0.33046-0.16523 0-0.29233 0.089t-0.1271 0.24785q0 0.12074 0.08897 0.197 0.08897 0.0699 0.24785 0.13346l0.47663 0.17159q0.46392 0.14616 0.64186 0.40037 0.17794 0.2542 0.17794 0.52111 0 0.45757-0.3686 0.71813-0.36224 0.26055-0.88971 0.26055-0.44486 0-0.80709-0.20336t-0.48934-0.62915z"/>
        <path d="m79.845 106.19q-0.51476-0.49569-0.51476-1.1884 0-0.6927 0.51476-1.182 0.52112-0.49569 1.2265-0.49569t1.2265 0.49569q0.52112 0.4957 0.52112 1.182 0 0.69271-0.52112 1.1884-0.51476 0.48934-1.2265 0.48934-0.70541 0-1.2265-0.48934zm0.54654-1.9002q-0.27327 0.29233-0.27327 0.71176 0 0.41944 0.27327 0.71813 0.27962 0.29233 0.67999 0.29233 0.40672 0 0.67999-0.29233 0.27962-0.29869 0.27962-0.71813 0-0.41943-0.27962-0.71176-0.27327-0.29869-0.67999-0.29869-0.40037 0-0.67999 0.29869z"/>
        <path d="m83.486 106.61v-3.2157h0.78167v0.54018q0.29233-0.61008 1.0422-0.61008 0.59102 0 0.88971 0.39401 0.29869 0.39401 0.29869 1.1121v1.7794h-0.78167v-1.7731q0-0.41308-0.16523-0.62915-0.16523-0.22243-0.45756-0.22243-0.36224 0-0.59738 0.26692-0.22878 0.26055-0.22878 0.74989v1.6078z"/>
      </g>
      <g aria-label="Franciscan Health">
        <path d="m42.623 113.45h-0.81345v-4.4486h2.8916v0.65457h-2.0781v1.2901h1.8112v0.64822h-1.8112z"/>
        <path d="m45.985 110.24v0.71177q0.06991-0.3813 0.32411-0.57831 0.26056-0.20336 0.55289-0.20336 0.10168 0 0.26691 0.0445v0.76897q-0.17159-0.0635-0.36859-0.0635-0.1271 0-0.24785 0.0445-0.11439 0.0381-0.24149 0.14617-0.12075 0.10168-0.19701 0.32411-0.07626 0.22242-0.07626 0.53382v1.4871h-0.78167v-3.2157z"/>
        <path d="m50.071 110.24h0.78167v3.2157h-0.78167v-0.48299q-0.35588 0.5529-1.0994 0.5529-0.69906 0-1.1376-0.48299-0.4385-0.48934-0.4385-1.2075 0-0.70542 0.43214-1.182 0.43214-0.48298 1.1503-0.48298 0.71177 0 1.0931 0.54653zm-1.8875 1.6015q0 0.44486 0.2542 0.73719 0.26056 0.29233 0.6927 0.29233 0.41308 0 0.68635-0.26691t0.27327-0.73083q0-0.47028-0.27327-0.75626-0.26691-0.29233-0.70541-0.29233-0.42579 0-0.67999 0.29233-0.24785 0.29234-0.24785 0.72448z"/>
        <path d="m51.743 113.45v-3.2157h0.78167v0.54019q0.29233-0.61009 1.0422-0.61009 0.59102 0 0.88971 0.39401 0.29869 0.39402 0.29869 1.1121v1.7794h-0.78167v-1.7731q0-0.41308-0.16523-0.62916-0.16523-0.22242-0.45756-0.22242-0.36224 0-0.59738 0.26691-0.22878 0.26056-0.22878 0.7499v1.6078z"/>
        <path d="m55.378 111.86q0-0.73719 0.48934-1.2138 0.48934-0.48298 1.3219-0.48298 0.64186 0 1.2392 0.43214l-0.36224 0.55925q-0.35588-0.29233-0.83887-0.29233-0.47028 0-0.76896 0.27326-0.29233 0.27327-0.29233 0.70542 0 0.43214 0.29869 0.70541 0.29869 0.27327 0.76261 0.27327 0.48934 0 0.83887-0.29234l0.36224 0.5529q-0.58467 0.4385-1.2392 0.4385-0.8198 0-1.3155-0.47028-0.4957-0.47027-0.4957-1.1884z"/>
        <path d="m59.814 113.45h-0.78167v-3.2157h0.78167zm-0.75625-3.8194q-0.13981-0.13981-0.13981-0.34953 0-0.20971 0.13981-0.34953 0.14617-0.14616 0.36859-0.14616 0.22243 0 0.36859 0.14616 0.15252 0.13982 0.15252 0.34953 0 0.20972-0.15252 0.34953-0.14617 0.13981-0.36859 0.13981-0.22243 0-0.36859-0.13981z"/>
        <path d="m60.437 112.69 0.61644-0.26056q0.0572 0.22879 0.24785 0.34953 0.19701 0.11439 0.4385 0.11439 0.19701 0 0.33682-0.0763 0.14617-0.0826 0.14617-0.26056 0-0.197-0.34953-0.34317l-0.47028-0.17794q-0.80709-0.29869-0.80709-0.89607 0-0.4385 0.33046-0.70541 0.33682-0.26691 0.84522-0.26691 0.87064 0 1.1248 0.71812l-0.62915 0.22878q-0.10168-0.33046-0.48934-0.33046-0.16523 0-0.29233 0.089-0.1271 0.089-0.1271 0.24785 0 0.12075 0.08897 0.19701 0.08897 0.0699 0.24785 0.13345l0.47663 0.17159q0.46392 0.14617 0.64186 0.40037t0.17794 0.52111q0 0.45757-0.36859 0.71813-0.36224 0.26056-0.88971 0.26056-0.44486 0-0.80709-0.20337-0.36224-0.20336-0.48934-0.62915z"/>
        <path d="m63.43 111.86q0-0.73719 0.48934-1.2138 0.48934-0.48298 1.3219-0.48298 0.64186 0 1.2392 0.43214l-0.36224 0.55925q-0.35588-0.29233-0.83887-0.29233-0.47028 0-0.76896 0.27326-0.29233 0.27327-0.29233 0.70542 0 0.43214 0.29869 0.70541t0.76261 0.27327q0.48934 0 0.83887-0.29234l0.36224 0.5529q-0.58467 0.4385-1.2392 0.4385-0.8198 0-1.3155-0.47028-0.4957-0.47027-0.4957-1.1884z"/>
        <path d="m69.486 110.24h0.78167v3.2157h-0.78167v-0.48299q-0.35588 0.5529-1.0994 0.5529-0.69906 0-1.1376-0.48299-0.4385-0.48934-0.4385-1.2075 0-0.70542 0.43214-1.182 0.43214-0.48298 1.1503-0.48298 0.71177 0 1.0931 0.54653zm-1.8875 1.6015q0 0.44486 0.2542 0.73719 0.26056 0.29233 0.6927 0.29233 0.41308 0 0.68635-0.26691t0.27327-0.73083q0-0.47028-0.27327-0.75626-0.26691-0.29233-0.70541-0.29233-0.42579 0-0.67999 0.29233-0.24785 0.29234-0.24785 0.72448z"/>
        <path d="m71.157 113.45v-3.2157h0.78167v0.54019q0.29233-0.61009 1.0422-0.61009 0.59102 0 0.88971 0.39401 0.29869 0.39402 0.29869 1.1121v1.7794h-0.78167v-1.7731q0-0.41308-0.16523-0.62916-0.16523-0.22242-0.45756-0.22242-0.36224 0-0.59738 0.26691-0.22878 0.26056-0.22878 0.7499v1.6078z"/>
        <path d="m80.264 113.45h-0.81345v-1.7985h-1.8811v1.7985h-0.81345v-4.4486h0.81345v2.0018h1.8811v-2.0018h0.81345z"/>
        <path d="m83.855 112.47 0.44486 0.4385q-0.55289 0.61645-1.4553 0.61645-0.83887 0-1.3473-0.47663-0.50205-0.48299-0.50205-1.1884 0-0.71813 0.50205-1.2011 0.50205-0.48934 1.2583-0.48934 0.70541 0 1.1948 0.45756 0.4957 0.45121 0.4957 1.3282h-2.6691q0 0.39402 0.29869 0.65458 0.30504 0.2542 0.80709 0.2542 0.54018 0 0.97232-0.39402zm-1.0994-1.6777q-0.30504 0-0.5656 0.14616-0.2542 0.14617-0.37495 0.48934h1.8303q-0.08262-0.33682-0.33682-0.48298-0.2542-0.15252-0.55289-0.15252z"/>
        <path d="m87.528 110.24h0.78167v3.2157h-0.78167v-0.48299q-0.35588 0.5529-1.0994 0.5529-0.69906 0-1.1376-0.48299-0.4385-0.48934-0.4385-1.2075 0-0.70542 0.43214-1.182 0.43214-0.48298 1.1503-0.48298 0.71177 0 1.0931 0.54653zm-1.8875 1.6015q0 0.44486 0.2542 0.73719 0.26056 0.29233 0.6927 0.29233 0.41308 0 0.68635-0.26691t0.27327-0.73083q0-0.47028-0.27327-0.75626-0.26691-0.29233-0.70541-0.29233-0.42579 0-0.67999 0.29233-0.24785 0.29234-0.24785 0.72448z"/>
        <path d="m89.994 113.45h-0.78167v-4.5947h0.78167z"/>
        <path d="m91.862 109.38v0.85793h0.95962v0.59738h-0.95962v1.6841q0 0.34953 0.3114 0.34953 0.14617 0 0.22878-0.089 0.08897-0.0953 0.08897-0.24149 0-0.17159-0.04449-0.26691h0.64186q0.06991 0.14616 0.06991 0.36224 0 0.3813-0.26056 0.6355-0.26056 0.25421-0.75625 0.25421-0.46392 0-0.76261-0.24785-0.29869-0.25421-0.29869-0.86429v-1.5761h-0.50205v-0.59738h0.54018l0.13981-0.85793z"/>
        <path d="m93.673 113.45v-4.5947h0.78167v1.9192q0.29233-0.61009 1.0359-0.61009 0.59102 0 0.88971 0.39401 0.30504 0.39402 0.30504 1.1121v1.7794h-0.78167v-1.7731q0-0.41308-0.17159-0.62916-0.16523-0.22242-0.45756-0.22242-0.32411 0-0.57196 0.2542-0.24785 0.2542-0.24785 0.76261v1.6078z"/>
      </g>
      <g transform="scale(.91193 1.0966)" aria-label="TM">
        <path d="m106.66 100.34h0.87379v0.16129h-0.33824v0.93486h-0.20044v-0.93486h-0.33511z"/>
        <path d="m108.36 101.43h-0.13623l-0.31319-0.75322-0.0658 0.76574h-0.20044l0.10179-1.0962h0.20983l0.33668 0.80645 0.33511-0.80645h0.20984l0.10335 1.0962h-0.20044l-0.0673-0.76574z"/>
      </g>
    </g>
  </g>
</svg>`;
const branding = pjs.public_hosted ? '<h1 class="h4" id="page-title">Multipurpose Calculator</h1>' : logoHtml;
const betaBanner = isBeta ? `<div class="container-fluid beta-notice"><div class="h6 text-white">TEST RELEASED VERSION ${pjs.version}</div></div>` : '';
const bodyStyle =  isBeta ? `style="border: 4px solid #dc3545;margin:0 auto 70px;"` : '';
const mpcTitle = pjs.public_hosted ? '' : `<h1 class="h4" id="page-title">Multipurpose Calculator</h1>`;

// eslint-disable-next-line no-undef
module.exports = {
  entry: {
    main: './js/main.js',
    amg: './js/amg.js',
    heparin: './js/heparin.js',
    pca: './js/pca.js',
    vanco: './js/vanco.js',
    nextdose: './js/nextdose.js',
    seconddose: './js/seconddose.js',
    alligation: './js/alligation.js',
    ivig: './js/ivig.js',
    kcentra: './js/kcentra.js',
    util: './js/util.js',
  },
  resolve: {
    alias: {
      jquery: "jquery/src/jquery",
    },
  },
  plugins: [
    new HtmlWebpackPlugin({
      template: './template.html',
      templateParameters: {
        buildversion: pjs.version,
        homepage: pjs.homepage,
        issues: pjs.bugs.url,
        thisYear: thisYear,
        betaBanner: betaBanner,
        bodyStyle: bodyStyle,
        branding: branding,
        mpcTitle: mpcTitle,
      },
      minify: {
        removeRedundantAttributes: false,
      },
    }),
    new CopyPlugin({
      patterns: [
        {
          from: "**/*",
          // eslint-disable-next-line no-undef
          context: `${__dirname}/src`,
        },
      ],
    }),
  ],
  performance: {
    maxAssetSize: 250000,
    maxEntrypointSize: 400000,
  },
};
